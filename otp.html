<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>کد تایید</title>
    <!-- ! Core Styles -->

    <link
      rel="stylesheet"
      href="assets/website/libs/bootstrap/bootstrap.rtl.min.css"
    />
    <link rel="stylesheet" href="assets/website/libs/fontawesome/css/all.css" />
    <link rel="stylesheet" href="assets/website/css/main.css" />

    <!-- ! Page Styles -->
    <style>
      body {
        display: flex;
      }
    </style>
  </head>
  <body class="body body--website">
    <!-- * Particle Background Start -->
    <div id="particles-js"></div>
    <!-- * Particle Background End -->

    <!-- * Reg/login Form Start -->
    <div class="form form--register-login">
      <div class="form__head">
        <a
          class="form__head-tab me-0 ms-auto p-3 glow-white-text-7"
          href="register-login.html"
        >
          برگشت
          <i class="fa-solid fa-arrow-left"></i>
        </a>
      </div>
      <form
        method="post"
        action=""
        class="form__body-footer-wrapper d-flex"
        id="form-otp"
      >
        <div class="form__body">
          <div>
            <p class="mb-2 text-center">کد تایید به ایمیل زیر ارسال شد.</p>
            <p class="mb-4 text-center fw-medium">example@domain.com</p>
            <p class="mb-4 text-center">کد را وارد کنید:</p>
          </div>
          <div class="row flex-wrap">
            <div class="col">
              <div class="input__wrapper input__wrapper--otp">
                <input
                  class="input__item"
                  id="code-1"
                  name="code-1"
                  placeholder="1"
                  maxlength="1"
                  type="text"
                />
                <input
                  class="input__item"
                  id="code-2"
                  name="code-2"
                  placeholder="2"
                  maxlength="1"
                  type="text"
                />
                <input
                  class="input__item"
                  id="code-3"
                  name="code-3"
                  placeholder="3"
                  maxlength="1"
                  type="text"
                />
                <input
                  class="input__item"
                  id="code-4"
                  name="code-4"
                  placeholder="4"
                  maxlength="1"
                  type="text"
                />
              </div>
            </div>
          </div>
        </div>
        <p id="countdown" class="text-center">ارسال مجدد کد (۲:۰۰)</p>
        <div class="form__foot">
          <button
            disabled
            class="button button--tertiary button--hover-shine glow-green-5 mx-auto mb-3"
          >
            تایید
          </button>
          <p class="text-center m-0">
            میخواهید ایمیل دیگری وارد کنید؟
            <a href="register-login.html" class="ms-1">برگشت</a>
          </p>
        </div>
      </form>
    </div>
    <!-- * Reg/login Form End -->
    <!-- ! Core Scripts -->
    <script src="assets/website/libs/jquery/jquery-3.7.1.min.js"></script>
    <script src="assets/website/libs/bootstrap/bootstrap.bundle.min.js"></script>
    <script src="assets/website/libs/particles.js/particles.min.js"></script>

    <script>
      // Initialize particles background
      particlesJS("particles-js", {
        particles: {
          number: { value: 80, density: { enable: true, value_area: 800 } },
          color: { value: "#0ea5e9" },
          shape: { type: "circle", stroke: { width: 0, color: "#000000" } },
          opacity: { value: 0.5, random: true },
          size: { value: 3, random: true },
          line_linked: {
            enable: true,
            distance: 150,
            color: "#3b82f6",
            opacity: 0.2,
            width: 1,
          },
          move: {
            enable: true,
            speed: 2,
            direction: "none",
            random: true,
            straight: false,
            out_mode: "out",
            bounce: false,
          },
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "grab" },
            onclick: { enable: true, mode: "push" },
            resize: true,
          },
        },
        retina_detect: true,
      });
    </script>
    <!-- ! Page Scripts -->
    <script src="assets/website/libs/validate.min.js/just-validate.production.min.js"></script>
    <script src="assets/website/libs/hcaptcha/api.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // ====== OTP Start ======
        const otpInputs = document.querySelectorAll(
          ".input__wrapper--otp .input__item"
        );
        const verifyBtn = document.querySelector(".form__foot button");
        const countdownEl = document.getElementById("countdown");
        let countdown;
        let timeLeft = 5;

        function updateCountdown() {
          const minutes = Math.floor(timeLeft / 60);
          const seconds = timeLeft % 60;

          countdownEl.textContent = `ارسال مجدد کد (${minutes}:${seconds
            .toString()
            .padStart(2, "0")})`;

          if (timeLeft <= 0) {
            clearInterval(countdown);
            countdownEl.innerHTML =
              '<a type="button" class="fw-medium glow-white-text-5" style="color:var(--white)" id="resend-code">ارسال مجدد کد</a>';
            document
              .getElementById("resend-code")
              .addEventListener("click", function (e) {
                e.preventDefault();
                startCountdown();
              });
          }
          timeLeft--;
        }

        function startCountdown() {
          timeLeft = 5;
          clearInterval(countdown);
          countdown = setInterval(updateCountdown, 1000);
          updateCountdown();
        }

        otpInputs.forEach((input, index) => {
          input.addEventListener("input", function () {
            if (this.value.length === 1 && index < otpInputs.length - 1) {
              otpInputs[index + 1].focus();
            }
            checkOtpComplete();
          });

          input.addEventListener("keydown", function (e) {
            if (e.key === "Backspace" && this.value === "" && index > 0) {
              otpInputs[index - 1].focus();
            }
          });
        });

        function checkOtpComplete() {
          const allFilled = Array.from(otpInputs).every(
            (input) => input.value !== ""
          );
          verifyBtn.disabled = !allFilled;
        }

        startCountdown();
        // ====== OTP End ======
      });
    </script>
  </body>
</html>
